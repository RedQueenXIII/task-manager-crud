<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager CRUD</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Ãcones SVG
        const Plus = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );
        
        const Trash = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
        );
        
        const Edit = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
        );
        
        const Check = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );
        
        const X = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );
        
        const Search = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
        );

        function TaskManager() {
            const [tasks, setTasks] = useState([]);
            const [title, setTitle] = useState('');
            const [description, setDescription] = useState('');
            const [priority, setPriority] = useState('medium');
            const [searchTerm, setSearchTerm] = useState('');
            const [editingId, setEditingId] = useState(null);
            const [editTitle, setEditTitle] = useState('');
            const [editDescription, setEditDescription] = useState('');
            const [editPriority, setEditPriority] = useState('medium');

            useEffect(() => {
                const stored = localStorage.getItem('tasks');
                if (stored) {
                    setTasks(JSON.parse(stored));
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            }, [tasks]);

            const handleCreate = () => {
                if (!title.trim()) return;

                const newTask = {
                    id: Date.now(),
                    title: title.trim(),
                    description: description.trim(),
                    priority,
                    completed: false,
                    createdAt: new Date().toISOString()
                };

                setTasks([newTask, ...tasks]);
                setTitle('');
                setDescription('');
                setPriority('medium');
            };

            const handleDelete = (id) => {
                setTasks(tasks.filter(task => task.id !== id));
            };

            const handleEdit = (task) => {
                setEditingId(task.id);
                setEditTitle(task.title);
                setEditDescription(task.description);
                setEditPriority(task.priority);
            };

            const handleUpdate = (id) => {
                setTasks(tasks.map(task => 
                    task.id === id 
                        ? { ...task, title: editTitle, description: editDescription, priority: editPriority }
                        : task
                ));
                setEditingId(null);
            };

            const handleToggleComplete = (id) => {
                setTasks(tasks.map(task => 
                    task.id === id ? { ...task, completed: !task.completed } : task
                ));
            };

            const filteredTasks = tasks.filter(task =>
                task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                task.description.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const getPriorityColor = (priority) => {
                const colors = {
                    high: 'bg-red-500',
                    medium: 'bg-yellow-500',
                    low: 'bg-green-500'
                };
                return colors[priority] || colors.medium;
            };

            const getPriorityBorder = (priority) => {
                const borders = {
                    high: 'border-red-200',
                    medium: 'border-yellow-200',
                    low: 'border-green-200'
                };
                return borders[priority] || borders.medium;
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 py-8 px-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-bold text-gray-800 mb-2">Task Manager</h1>
                            <p className="text-gray-600">Organize suas tarefas de forma eficiente</p>
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                            <div className="space-y-4">
                                <div>
                                    <input
                                        type="text"
                                        placeholder="TÃ­tulo da tarefa"
                                        value={title}
                                        onChange={(e) => setTitle(e.target.value)}
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    />
                                </div>
                                <div>
                                    <textarea
                                        placeholder="DescriÃ§Ã£o (opcional)"
                                        value={description}
                                        onChange={(e) => setDescription(e.target.value)}
                                        rows="3"
                                        className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                                    />
                                </div>
                                <div className="flex gap-4 items-center">
                                    <select
                                        value={priority}
                                        onChange={(e) => setPriority(e.target.value)}
                                        className="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    >
                                        <option value="low">Baixa Prioridade</option>
                                        <option value="medium">MÃ©dia Prioridade</option>
                                        <option value="high">Alta Prioridade</option>
                                    </select>
                                    <button
                                        onClick={handleCreate}
                                        className="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition flex items-center justify-center gap-2"
                                    >
                                        <Plus />
                                        Adicionar Tarefa
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6">
                            <div className="mb-6">
                                <div className="relative">
                                    <div className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                        <Search />
                                    </div>
                                    <input
                                        type="text"
                                        placeholder="Buscar tarefas..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    />
                                </div>
                            </div>

                            <div className="space-y-3">
                                {filteredTasks.length === 0 ? (
                                    <div className="text-center py-12 text-gray-500">
                                        <p className="text-lg">Nenhuma tarefa encontrada</p>
                                        <p className="text-sm mt-2">Adicione sua primeira tarefa acima!</p>
                                    </div>
                                ) : (
                                    filteredTasks.map(task => (
                                        <div
                                            key={task.id}
                                            className={`border-l-4 ${getPriorityBorder(task.priority)} bg-gray-50 rounded-lg p-4 transition hover:shadow-md`}
                                        >
                                            {editingId === task.id ? (
                                                <div className="space-y-3">
                                                    <input
                                                        type="text"
                                                        value={editTitle}
                                                        onChange={(e) => setEditTitle(e.target.value)}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                    />
                                                    <textarea
                                                        value={editDescription}
                                                        onChange={(e) => setEditDescription(e.target.value)}
                                                        rows="2"
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
                                                    />
                                                    <div className="flex gap-2">
                                                        <select
                                                            value={editPriority}
                                                            onChange={(e) => setEditPriority(e.target.value)}
                                                            className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                        >
                                                            <option value="low">Baixa</option>
                                                            <option value="medium">MÃ©dia</option>
                                                            <option value="high">Alta</option>
                                                        </select>
                                                        <button
                                                            onClick={() => handleUpdate(task.id)}
                                                            className="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition flex items-center gap-1"
                                                        >
                                                            <Check />
                                                            Salvar
                                                        </button>
                                                        <button
                                                            onClick={() => setEditingId(null)}
                                                            className="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition flex items-center gap-1"
                                                        >
                                                            <X />
                                                            Cancelar
                                                        </button>
                                                    </div>
                                                </div>
                                            ) : (
                                                <div className="flex items-start gap-3">
                                                    <input
                                                        type="checkbox"
                                                        checked={task.completed}
                                                        onChange={() => handleToggleComplete(task.id)}
                                                        className="mt-1 w-5 h-5 rounded cursor-pointer"
                                                    />
                                                    <div className="flex-1">
                                                        <h3 className={`font-semibold text-lg ${task.completed ? 'line-through text-gray-500' : 'text-gray-800'}`}>
                                                            {task.title}
                                                        </h3>
                                                        {task.description && (
                                                            <p className={`text-sm mt-1 ${task.completed ? 'line-through text-gray-400' : 'text-gray-600'}`}>
                                                                {task.description}
                                                            </p>
                                                        )}
                                                        <div className="flex items-center gap-2 mt-2">
                                                            <span className={`${getPriorityColor(task.priority)} text-white text-xs px-2 py-1 rounded-full`}>
                                                                {task.priority === 'high' ? 'Alta' : task.priority === 'medium' ? 'MÃ©dia' : 'Baixa'}
                                                            </span>
                                                            <span className="text-xs text-gray-500">
                                                                {new Date(task.createdAt).toLocaleDateString('pt-BR')}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button
                                                            onClick={() => handleEdit(task)}
                                                            className="text-blue-600 hover:text-blue-800 p-2 hover:bg-blue-50 rounded-lg transition"
                                                        >
                                                            <Edit />
                                                        </button>
                                                        <button
                                                            onClick={() => handleDelete(task.id)}
                                                            className="text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition"
                                                        >
                                                            <Trash />
                                                        </button>
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    ))
                                )}
                            </div>

                            {filteredTasks.length > 0 && (
                                <div className="mt-6 pt-6 border-t border-gray-200 text-center text-sm text-gray-600">
                                    Total: {filteredTasks.length} tarefa{filteredTasks.length !== 1 ? 's' : ''} | 
                                    ConcluÃ­das: {filteredTasks.filter(t => t.completed).length}
                                </div>
                            )}
                        </div>

                        <div className="mt-6 text-center text-sm text-gray-600">
                            <p>ðŸ’¼ CRUD desenvolvido com React + TailwindCSS</p>
                            <p className="mt-1">âœ¨ Funcionalidades: Create, Read, Update, Delete, Search, Filter</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<TaskManager />, document.getElementById('root'));
    </script>
</body>
  </html>
